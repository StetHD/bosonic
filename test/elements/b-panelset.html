<!DOCTYPE html>
<html>
    <head>
        <title>b-dialog</title>
        <meta charset="utf-8">
        <script type="text/javascript" src="../../node_modules/webcomponents.js/webcomponents.js"></script>
        <script type="text/javascript" src="../../dist/bosonic-runtime.js"></script>

        <script src="../../node_modules/web-component-tester/browser.js"></script>
        <script src="../../bower_components/test-fixture/test-fixture-mocha.js"></script>
        <script src="../../bower_components/iron-test-helpers/mock-interactions.js"></script>

        <link rel="import" href="../../bower_components/test-fixture/test-fixture.html">

        <link rel="import" href="../../dist/default/b-panel.html">
        <link rel="import" href="../../dist/default/b-panelset.html">
    </head>

    <body>
        <test-fixture id="basic-panelset">
            <template>
                <b-panelset>
                    <b-panel>
                        <b-panel-title>Lorem ipsum</b-panel-title>
                        <p>Lorem ipsum dolor</p>
                    </b-panel>
                    <b-panel>
                        <b-panel-title>Lorem ipsum</b-panel-title>
                        <p>Lorem ipsum dolor</p>
                    </b-panel>
                    <b-panel>
                        <b-panel-title>Lorem ipsum</b-panel-title>
                        <p>Lorem ipsum dolor</p>
                    </b-panel>
                </b-panelset>
            </template>
        </test-fixture>
        <script type="text/javascript">
            describe("Panelset component", function() {
                var panelset, panel, panels;

                function getDisplay(elt) {
                    return window.getComputedStyle(elt).display;
                }

                describe('without a preferreddisplay attribute', function() {
                    it('should be displayed as an accordion', function() {
                        panelset = fixture('basic-panelset');
                        panel = panelset.querySelector('b-panel');
                        expect(getDisplay(panel.titleElement)).to.equal('block');
                        expect(getDisplay(panelset.tabBar)).to.equal('none');
                    });

                    it('should only show the first panel', function() {
                        panelset = fixture('basic-panelset');
                        panels = panelset.querySelectorAll('b-panel');
                        expect(getDisplay(panels[0].contentWrapper)).to.equal('block');
                        expect(getDisplay(panels[1].contentWrapper)).to.equal('none');
                    });
                });
            });
        </script>
    </body>
</html>